<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" sizes="32x32" href="./images/logo perfil sin fondo.ico">
  <link rel="stylesheet" href="styles.css">
  <title>PGSCOM cinema</title>
</head>
<body>
  <div class="sky-image">
    <a href="https://pgscom.github.io">
      <img src="images/logo perfil sin fondo.png" height="45" alt="Logo PGSCOM" href="https://pgscom.github.io" />
    </a>
  </div>

  <div class="featured" style="height: 95%;">
    <div id="video" style="height: 45%;">
      <video id="elvideo" class="hijo" playsinline muted loop autoplay height="100%" src="images/Agua.mp4"></video>
    </div>
    <div class="featured-details">
      <h1 style="text-align: center;" class="featured-title">Agua</h1>
      <ul class="tags">
        <li class="tag">
          Hecho en 2022
        </li>
        <li class="tag">
          Efectos especiales
        </li>
        <li class="tag">
          Festival de cortometrajes de Manos Unidas
        </li>
        <li class="tag">
          ðŸ¤¿
        </li>
      </ul>
    </div>
  </div>
  <div class="featured-actions">
    <a href="https://youtu.be/J-APNXRvc1I" style="color: black;" class="button icon-play">Reproducir</a>
  </div>


  <main>
    <div class="list">
      <h2 class="list-title">Contenidos:</h2>
      <div class="list-content">
        <div class="list-item">
          <a href="#">
            <img src="./images/covers/matrix.png" alt="Bob Esponja la pelÃ­cula">
          </a>
        </div>
        <div class="list-item">
          <a href="#">
            <img src="./images/covers/bob.png" alt="Bob Esponja la pelÃ­cula">
          </a>
        </div>
        <div class="list-item">
          <a href="#">
            <img src="./images/covers/spider-man.png" alt="Bob Esponja la pelÃ­cula">
          </a>
        </div>
        <div class="list-item">
          <a href="#">
            <img src="./images/covers/dragon.png" alt="Bob Esponja la pelÃ­cula">
          </a>
        </div>
        <div class="list-item">
          <a href="#">
            <img src="./images/covers/john.png" alt="Bob Esponja la pelÃ­cula">
          </a>
        </div>
        <div class="list-item">
          <a href="#">
            <img src="./images/covers/santa.png" alt="Bob Esponja la pelÃ­cula">
          </a>
        </div>
      </div>
    </div>

  </main>

  <footer class="footer">
    <ul class="tab-list">
      <li class="tab-item">
        <a href="index.html">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M12 2.09961L1 12H4V21H11V15H13V21H20V12H23L12 2.09961ZM12 4.79102L18 10.1914V11V19H15V13H9V19H6V10.1914L12 4.79102Z" />
          </svg>
          <span>Inicio</span>
        </a>
      </li>
      <li class="tab-item">
        <a href="proximamente.html">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0)">
              <path
                d="M4 3C2.897 3 2 3.897 2 5V19C2 20.103 2.897 21 4 21H12V19H4V5H20V13.2852L22 14.4082V5C22 3.897 21.103 3 20 3H4ZM6.00195 7V9H8V7H6.00195ZM16 7V9H18V7H16ZM6 11V13H8V11H6ZM15.0859 13C14.514 13.019 14 13.492 14 14.1445V22.8555C14 23.7255 14.9132 24.2764 15.6602 23.8574L23.4199 19.502C24.1939 19.067 24.1939 17.932 23.4199 17.498L15.6602 13.1426C15.4734 13.0378 15.2766 12.9937 15.0859 13ZM6 15V17H8V15H6Z"
                fill="black" />
            </g>
            <defs>
              <clipPath id="clip0">
                <rect width="24" height="24" fill="white" />
              </clipPath>
            </defs>
          </svg>
          <span>PrÃ³ximamente</span>
        </a>
      </li>
    </ul>
  </footer>

  <script>
    // <![CDATA[  <-- For SVG support
    if ('WebSocket' in window) {
      (function () {
        function refreshCSS() {
          var sheets = [].slice.call(document.getElementsByTagName("link"));
          var head = document.getElementsByTagName("head")[0];
          for (var i = 0; i < sheets.length; ++i) {
            var elem = sheets[i];
            var parent = elem.parentElement || head;
            parent.removeChild(elem);
            var rel = elem.rel;
            if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
              var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
              elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
            }
            parent.appendChild(elem);
          }
        }
        var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
        var address = protocol + window.location.host + window.location.pathname + '/ws';
        var socket = new WebSocket(address);
        socket.onmessage = function (msg) {
          if (msg.data == 'reload') window.location.reload();
          else if (msg.data == 'refreshcss') refreshCSS();
        };
        if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
          console.log('Live reload enabled.');
          sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
        }
      })();
    }
    else {
      console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
    }
    // ]]>
  </script>

<script>
  function returnCommentSymbol(language = "javascript") {
    const languageObject = {
      bat: "@REM",
      c: "//",
      csharp: "//",
      cpp: "//",
      closure: ";;",
      coffeescript: "#",
      dockercompose: "#",
      css: "/*DELIMITER*/",
      "cuda-cpp": "//",
      dart: "//",
      diff: "#",
      dockerfile: "#",
      fsharp: "//",
      "git-commit": "//",
      "git-rebase": "#",
      go: "//",
      groovy: "//",
      handlebars: "{{!--DELIMITER--}}",
      hlsl: "//",
      html: "<!--DELIMITER-->",
      ignore: "#",
      ini: ";",
      java: "//",
      javascript: "//",
      javascriptreact: "//",
      json: "//",
      jsonc: "//",
      julia: "#",
      latex: "%",
      less: "//",
      lua: "--",
      makefile: "#",
      markdown: "<!--DELIMITER-->",
      "objective-c": "//",
      "objective-cpp": "//",
      perl: "#",
      perl6: "#",
      php: "<!--DELIMITER-->",
      powershell: "#",
      properties: ";",
      jade: "//-",
      python: "#",
      r: "#",
      razor: "<!--DELIMITER-->",
      restructuredtext: "..",
      ruby: "#",
      rust: "//",
      scss: "//",
      shaderlab: "//",
      shellscript: "#",
      sql: "--",
      svg: "<!--DELIMITER-->",
      swift: "//",
      tex: "%",
      typescript: "//",
      typescriptreact: "//",
      vb: "'",
      xml: "<!--DELIMITER-->",
      xsl: "<!--DELIMITER-->",
      yaml: "#"
    }
    return languageObject[language].split("DELIMITER")
  }
  var savedChPos = 0
  var returnedSuggestion = ''
  let editor, doc, cursor, line, pos
  pos = {line: 0, ch: 0}
  var suggestionsStatus = false
  var docLang = "python"
  var suggestionDisplayed = false
  var isReturningSuggestion = false
  document.addEventListener("keydown", (event) => {
  setTimeout(()=>{
    editor = event.target.closest('.CodeMirror');
    if (editor){
      const codeEditor = editor.CodeMirror
      if(!editor.classList.contains("added-tab-function")){
        editor.classList.add("added-tab-function")
        codeEditor.removeKeyMap("Tab")
        codeEditor.setOption("extraKeys", {Tab: (cm)=>{

          if(returnedSuggestion){
            acceptTab(returnedSuggestion)
          }
          else{
            cm.execCommand("defaultTab")
          }
        }})
      }
      doc = editor.CodeMirror.getDoc()
      cursor = doc.getCursor()
      line = doc.getLine(cursor.line)
      pos = {line: cursor.line, ch: line.length}

      if(cursor.ch > 0){
        savedChPos = cursor.ch
      }

      const fileLang = doc.getMode().name
      docLang = fileLang
      const commentSymbol = returnCommentSymbol(fileLang)
      if (event.key == "?"){
        var lastLine = line
        lastLine = lastLine.slice(0, savedChPos - 1)

        if(lastLine.trim().startsWith(commentSymbol[0])){
          lastLine += " "+fileLang
          lastLine = lastLine.split(commentSymbol[0])[1]
          window.postMessage({source: 'getQuery', payload: { data: lastLine } } )
          isReturningSuggestion = true
          displayGrey("\nBlackbox loading...")
        }
      }else if(event.key === "Enter" && suggestionsStatus && !isReturningSuggestion){
        var query = doc.getRange({ line: Math.max(0,cursor.line-10), ch: 0 }, { line: cursor.line, ch: line.length })
        window.postMessage({source: 'getSuggestion', payload: { data: query, language: docLang } } )
        displayGrey("Blackbox loading...")
      }else if(event.key === "ArrowRight" && returnedSuggestion){
        acceptTab(returnedSuggestion)
      }else if(event.key === "Enter" && isReturningSuggestion){
        displayGrey("\nBlackbox loading...")
      }else if(event.key === "Escape"){
        displayGrey("")
      }
    }
  }, 0)
  })

  function acceptTab(text){
  if (suggestionDisplayed){
    displayGrey("")
    doc.replaceRange(text, pos)
    returnedSuggestion = ""
    updateSuggestionStatus(false)
  }
  }
  function acceptSuggestion(text){
    displayGrey("")
    doc.replaceRange(text, pos)
    returnedSuggestion = ""
    updateSuggestionStatus(false)
  }
  function displayGrey(text){
    if(!text){
      document.querySelector(".blackbox-suggestion").remove()
      return
    }
    var el = document.querySelector(".blackbox-suggestion")
    if(!el){
      el = document.createElement('span')
      el.classList.add("blackbox-suggestion")
      el.style = 'color:grey'
      el.innerText = text
    }
    else{
      el.innerText = text
    }
    
    var lineIndex = pos.line;
    editor.getElementsByClassName('CodeMirror-line')[lineIndex].appendChild(el)
  }
  function updateSuggestionStatus(s){
    suggestionDisplayed = s
    window.postMessage({source: 'updateSuggestionStatus', status: suggestionDisplayed, suggestion: returnedSuggestion})
  }
  window.addEventListener('message', (event)=>{
  if (event.source !== window ) return
  if (event.data.source == 'return'){
    isReturningSuggestion = false
    const formattedCode = formatCode(event.data.payload.data)
    returnedSuggestion = formattedCode
    displayGrey(formattedCode)
    updateSuggestionStatus(true)
  }
  if(event.data.source == 'suggestReturn'){
    returnedSuggestion = event.data.payload.data
    displayGrey(event.data.payload.data)
    updateSuggestionStatus(true)
  }
  if(event.data.source == 'suggestionsStatus'){
    suggestionsStatus = event.data.payload.enabled
  }
  if(event.data.source == 'acceptSuggestion'){
    
    acceptSuggestion(event.data.suggestion)
  }
  })
  document.addEventListener("keyup", function(){
    returnedSuggestion = ""
    updateSuggestionStatus(false)
  })
  function formatCode(data) {
    if (Array.isArray(data)) {
      var finalCode = ""
      var pairs = []
  
      const commentSymbol = returnCommentSymbol(docLang)
      data.forEach((codeArr, idx) => {
        const code = codeArr[0]
        var desc = codeArr[1]
        const descArr = desc.split("\n")
        var finalDesc = ""
        descArr.forEach((descLine, idx) => {
          const whiteSpace = descLine.search(/\S/)
          if (commentSymbol.length < 2 || idx === 0) {
            finalDesc += insert(descLine, whiteSpace, commentSymbol[0])
          }
          if (commentSymbol.length > 1 && idx === descArr.length - 1) {
            finalDesc = finalDesc + commentSymbol[1] + "\n"
          }
        })
  
        finalCode += finalDesc + "\n\n" + code
        pairs.push(finalCode)
      })
      return "\n"+pairs.join("\n")
    }
  
    return "\n"+data
  }
  
  function insert(str, index, value) {
    return str.substr(0, index) + value + str.substr(index)
  }
</script>

</body>
</html>